```uml
@startuml
ユーザー -> Webサーバー:アクセス
Webサーバー -> ユーザー:Webページを転送・表示
ユーザー -> Webサーバー:詳細画面へアクセス
Webサーバー -> ユーザー:詳細画面を転送・表示
ユーザー -> Webサーバー:該当商品をカートに追加
Webサーバー -> Webサーバー:カートの商品の追加処理
Webサーバー -> ユーザー:カート内の一覧を表示
opt ユーザーアカウント未登録
ユーザー -> Webサーバー:ユーザー登録
Webサーバー -> DBサーバー:ユーザー登録
DBサーバー -> DBサーバー:登録処理
DBサーバー -> Webサーバー:登録結果

alt 登録成功
  Webサーバー -> ユーザー:登録メッセージを表示
else 登録失敗
  Webサーバー -> ユーザー:失敗メッセージを表示
end

end
ユーザー -> Webサーバー:ログイン
Webサーバー -> DBサーバー:ログイン照会
DBサーバー -> DBサーバー:ログイン処理
DBサーバー -> Webサーバー:認証結果

activate ユーザー
alt 認証成功
Webサーバー -> ユーザー:ユーザー名
else 認証失敗
Webサーバー -> ユーザー:失敗メッセージを表示

end
ユーザー -> Webサーバー:カートを開く
Webサーバー -> ユーザー:カート内情報表示
ユーザー -> Webサーバー:注文確定
Webサーバー -> DBサーバー:注文情報送信
DBサーバー -> DBサーバー:注文処理・在庫参照
DBサーバー -> Webサーバー:注文結果

alt 注文成功
Webサーバー -> ユーザー:注文完了メッセージを表示
else 注文失敗
Webサーバー -> ユーザー:注文失敗メッセージを表示
end

@enduml
